@{
    Layout = null;
}

<html ng-app="RememberBox">
<head>
    <title>Remember Box</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <link rel='stylesheet prefetch' href='https://fullcalendar.io/js/fullcalendar-3.4.0/fullcalendar.min.css'>
    <link rel="stylesheet" href="~/js2/style.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js'></script>
    

    <script src="~/js2/index.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="shortcut icon" href="~/images/remembeeer.png" type="image/x-icon" />
    <link href="~/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <link href="~/css/animate.css" rel="stylesheet" type="text/css" />
    <link href="~/css/Estilos.css" rel="stylesheet" type="text/css" />
    <link href="~/css/angular-bootstrap-calendar.min.css" rel="stylesheet" type="text/css" />
    <link href="~/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="~/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="~/css/pretty-checkable.css" rel="stylesheet" type="text/css" />
    <link href="~/css/flatly.css" rel="stylesheet" type="text/css" />
    <link href="~/css/owl.carousel.min.css" rel="stylesheet" type="text/css">
    <link href="~/css/owl.theme.default.min.css" rel="stylesheet" type="text/css">
    <link href="~/css/app.css" rel="stylesheet" type="text/css" />
    <link href="~/css/sweetalert.css" rel="stylesheet" type="text/css" />



    <script src="~/js/ComboBox.js" type="text/javascript"></script>
 
    <script src="~/js/interact.min.js"></script>
    <script src="~/js/angular.min.js" type="text/javascript"></script>
    
    <script src="~/js/datetime-picker.min.js" type="text/javascript"></script>
    <script src="~/js/rzslider.min.js" type="text/javascript"></script>
    <script src="~/js/loading-bar.min.js" type="text/javascript"></script>
    <script src="~/js/angular-animate.min.js" type="text/javascript"></script>
    <script src="~/js/i18n/angular-locale_es-mx.js" type="text/javascript"></script>
    
    <script src="~/js/angular-route.min.js" type="text/javascript"></script>
    <script src="~/js/angular-touch.min.js" type="text/javascript"></script>
    <script src="~/js/angular-pretty-checkable.min.js" type="text/javascript"></script>
    <script src="~/js/owl.carousel.min.js" type="text/javascript"></script>
    <script src="~/js1/app/app.js" type="text/javascript"></script>
    <script src="~/js1/controladores/aplicacionController.js" type="text/javascript"></script>
    <script src="~/js/Funciones.js" type="text/javascript"></script>
    <script src="~/js/Busqueda.js" type="text/javascript"></script>
    <script src="~/js/Funciones2.js" type="text/javascript"></script>



   
    <script src="~/js/bootstrap-checkbox.js" type="text/javascript"></script>
    <script src="~/js/ui-bootstrap-tpls.min.js" type="text/javascript"></script>
    <script src="~/js/angular-bootstrap-calendar-tpls.min.js" type="text/javascript"></script>

    <script>
        function openCity(evt, cityName) {
            var i, x, tablinks;
            x = document.getElementsByClassName("city");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < x.length; i++) {
                tablinks[i].className = tablinks[i].className.replace("w3-border-teal", "");
            }
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.firstElementChild.className += " w3-border-teal ";
        }
    </script>

    <script>
        function valor() {
            var inpu = document.getElementById('fec').value;
            document.getElementById('invisible').value = inpu;
        }
    </script>

    <script>
        function myFunction() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

        function cal() {
            try {
                var a = parseInt(document.f.serv1.value),
                    b = parseInt(document.f.serv2.value);
                document.f.precio.value = a + b;
            } catch (e) {
            }
        }
    </script>
    <!--Inicia script tooltip-->
    <script>
  $( function() {
    $( document ).tooltip();
  } );
    </script>
   

    <!--Estilos del Modal-->

    <style>
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 400px;
            top: 100px;
            width: 30%; /* Full width */
            height: 50%; /* Full height */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(10, 10, 10, 0.55); /* Black w/ opacity */
        }

        /* Modal Content (image) */
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 200px;
        }

        /* Caption of Modal Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 200px;
            text-align: center;
            color: #fefefe;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation */
        .modal-content, #caption {
            -webkit-animation-name: zoom;
            -webkit-animation-duration: 0.6s;
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        -webkit-keyframes zoom {
            from;

        {
            -webkit-transform: scale(0);
        }

        to {
            -webkit-transform: scale(1);
        }

        }

        -keyframes zoom {
            from;

        {
            transform: scale(0.1);
        }

        to {
            transform: scale(1);
        }

        }

        /* The Close Button */
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #fefefe;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        /* 100% Image Width on Smaller Screens */

        .modal-content {
            width: 100%;
        }
    </style>


</head>
<body ng-controller="aplicacionController as control">


    <div class="shell encabezado">
        <div class="breadcrumbs-custom__inner ">
            <a class="brand-name" href="/Home/Indice"><img src="~/images/remembeeer.png" alt="" class="imagen"></a>
            <!--<p class="breadcrumbs-custom__title"> Administrador</p>-->
            <ul class="breadcrumbs-custom__path">
              
            </ul>
        </div>
    </div>

    <section class="section-md bg-white text-center col-lg-12" style="margin-top: 10px;" ng-show="control.verAccion(0)">
        <div class="w3-container">


            <div class="w3-row menu col-sm-12">
                <a href="javascript:void(0)" onclick="openCity(event, 'Servicio');">
                    <div class="w3-quarter  tablink w3-bottombar w3-hover-light-grey w3-padding box-title">SERVICIOS</div>
                </a>
                <a href="javascript:void(0)" onclick="openCity(event, 'Jardines');">
                    <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">JARDINES</div>
                </a>
                <a href="javascript:void(0)" onclick="openCity(event, 'Contratos');">
                    <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">CONTRATOS</div>
                </a>
                <a href="javascript:void(0)" id="calbtn" onclick="openCity(event, 'prEv');">
                    <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">CALENDARIZACIÓN</div>
                </a>
            </div>

            <div id="Servicio" class="w3-container city" style="display:none">

                <div class="lab"><button onclick="document.getElementById('id01').style.display='block'" class="w3-button  texto-blanco  icono" title="Agregar Nuevo Servicio"><i class="fa fa-plus text-center"></i></button> </div>

                <br />
                <!--Inicio de Formulario-->
                <div class="container">
                    <div class="box box-success ">

                        <div class="box-header with-border">
                            <h3 class="box-title">Servicios</h3>
                        </div>
                        <div class="table-responsive">
                            <table id="tabla1" class="table table-bordered table-hover">
                                <thead class="fondo-verde texto-blanco">

                                    <tr>
                                        <th style="width:5%">No.</th>
                                        <th style="width:40%">Servicio</th>
                                        <th style="width:10%">Precio</th>
                                        <th style="width:60%">Propiedades</th>
                                        <th style="width:20%">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{var tipo = 0;}
                                    @foreach (var a in ViewBag.servicio)
                                    {
                                        <tr>
                                            @{tipo++;}
                                            <td>@tipo</td>
                                            <td>@a.Servicio.ToUpper()</td>
                                            <td>@a.Precio.ToString("$###,###,##0.00")</td>
                                            <td>@a.Propiedades.ToUpper()</td>
                                            <td>
                                                <a href="@Url.Action("Editar","Home", new { id = a.Id_servicio })" title="Editar">
                                                    <i class="fa fa-edit texto-azul"></i>
                                                </a>
                                                <a href="@Url.Action("Eliminar","Home", new { id = a.Id_servicio })" title="Eliminar">
                                                    <i class="fa fa-trash texto-rojo"></i>
                                                </a>
                                            </td>

                                        </tr>
                                                }

                                </tbody>
                            </table>
                            </div>
                        </div>
                </div>

                  
              

            </div>

            <div id="Jardines" class="w3-container city " style="display:none">
                <!--Inicia el formulario registro jardines-->
                @using (Html.BeginForm("altaJardin", "Home", FormMethod.Post))
                {
                    <div class="box box-success col-sm-5 ">
                        <div class="box-header with-border">
                            <h3 class="box-title">Registrar Jardín</h3>
                        </div>

                        <div class="form-group">
                            <div class="w3-row w3-section ">
                                <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-user"></i></div>
                                <div class="w3-rest">
                                    <input class="form-control" type="text" placeholder="Ingresa el nombre del encargado de jardín" name="nombre1" required>
                                </div>
                            </div>

                            <div class="w3-row w3-section ">
                                <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-university"></i></div>
                                <div class="w3-rest">
                                    <input class="form-control" type="text" placeholder="Ingresa el nombre del jardín" name="nombre2" required>
                                </div>
                            </div>

                            <div class="w3-row w3-section ">
                                <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-map-marker"></i></div>
                                <div class="w3-rest">
                                    <textarea class="form-control" type="text" placeholder="Ingresa la dirección" name="dir" required></textarea>
                                </div>
                            </div>

                            <div class="w3-row w3-section ">
                                <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-phone"></i></div>
                                <div class="w3-rest">
                                    <input class="form-control" type="number" placeholder="Ingresa el numero de telefono" name="tel" required>
                                </div>
                            </div>

                            <button id="btn2" class="btn btn-sm btn-success " type="submit">Registrar <span class="glyphicon glyphicon-floppy-disk"></span></button>

                        </div>
                    </div>
                }
                <!--Inicio de Tabla Jardín-->

                <div class="col-sm-6 col-md-offset-1 buscador">

                    <div class="input-group ">

                        <input type="text" id="buscar" class="form-control" placeholder="Buscar..." name="search" value="">
                        <div class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>

                    </div>
                </div>

                <div class="box box-success col-sm-6 col-md-offset-1">

                    <div class="box-header with-border">
                        <h3 class="box-title">Jardines</h3>
                    </div>
                    <div class="table-responsive">
                        <table id="myTable" class="table table-bordered table-hover ">
                            <thead class="fondo-verde texto-blanco">

                                <tr>
                                    <th style="width:4%">No.</th>
                                    <th style="width:20%">Encargado</th>
                                    <th style="width:24%">Jardín</th>
                                    <th style="width:35%">Dirección</th>
                                    <th style="width:15%">Teléfono</th>
                                    <th style="width:2%">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="buscar1">

                                @{var num = 0;}
                                @foreach (var j in ViewBag.jar)
                                {
                                    <tr>
                                        @{num++;}
                                        <td>@num</td>
                                        <td>@j.NomEnc.ToUpper()</td>
                                        <td>@j.NomJar.ToUpper()</td>
                                        <td>@j.Direccion.ToUpper()</td>
                                        <td>@j.Telefono</td>
                                        <td>
                                            <a href="@Url.Action("EditarJardin","Home", new { id = j.Id_Jardin })" title="Editar">
                                                <i class="fa fa-edit texto-verde"></i>
                                            </a>
                                            <a href="@Url.Action("EliminarJardin","Home", new { id = j.Id_Jardin })" title="Eliminar">
                                                <i class="fa fa-trash texto-rojo"></i>
                                            </a>
                                        </td>

                                    </tr>
                                            }
                            </tbody>
                        </table>
                        </div>
                    </div>


                <!--Fin de Tabla Jardín-->
                <!--Termina formulario registro jardines-->



            </div>

            <div id="Contratos" class="w3-container city " style="display:none">

                <!--Inicia Formulario contratos-->

                
                
                <div class="lab"><button onclick="document.getElementById('id02').style.display='block'" class="w3-button w3-circle texto-blanco icono1 " title="Ver Contratos"><i class="fa fa-folder"></i></button> </div>
                <div class="col-sm-2 "></div>
                <div class="box box-success col-sm-8">
                    <div class="box-header with-border">
                        <h3 class="box-title">Crear Contrato</h3>
                    </div>
                    @using (Html.BeginForm("altaContrato", "Home", FormMethod.Post))
                    {
                        <form class="w3-container col-sm-8">
                            <div class="form-group">
                                <label><b>Cliente:</b></label>
                                <input class="form-control" type="text" placeholder="Ingresa el nombre del cliente" name="cliente" required>
                                <label><b>Jardín:</b></label>

                                <select class="form-control" type="text" placeholder="Ingresa el jardín" name="jardin" required>

                                    @foreach (var jard in ViewBag.jar)
                                    {
                                        <option value="@jard.NomJar">@jard.NomJar</option>
                                    }
                                </select>

                                <div class="form-group">
                                    <label class="">Fecha:</label>
                                    <div class="input-group date">
                                        <input type="hidden" id="invisible" name="inp" />
                                        <input type="text" id="fec" onkeypress="valor();" ng-model="fecha" class="form-control" placeholder="Seleccione Fecha de evento..." ng-focus="abrirInicio = true" datetime-picker="yyyy-MM-dd" enable-time="false" is-open="abrirInicio" />
                                        <span class="input-group-btn ">
                                            <button type="button" class="btn btn-default" ng-click="abrirInicio = true"><i class="fa fa-calendar"></i></button>
                                        </span>
                                    </div>
                                </div>

                                <label class=""><b>Servicios:</b></label>
                                <br />

                                <ul>
                                    <div class="input-group">
                                        @foreach (var check in ViewBag.servicio)
                                        {
                                            <li class="checkbox-inline"><input id="check" type="checkbox" onclick="dato()" tu-attr-precio="@check.Precio" class="mis-checkboxes checkbox-inline" value="@check.Servicio" /> @check.Servicio</li>
                                        }
                                        <li class="checkbox-inline"><input name="precio" id="total" type="text" placeholder="0.00" value="precio" /></li>
                                        <input id="serv" type="hidden" name="serv" value="serv" />
                                    </div>

                                </ul>


                                <!-- <div>
                                     <input id="total" type="text" placeholder="0.00" disabled />

                                 </div>-->


                                <br />
                                <br />
                                <label><b>Forma de pago:</b></label>
                                <select class="form-control" type="text" placeholder="Ingresa el jardín" name="fp" required>
                                    <option name="combo" value="">Seleccione el tipo de pago...</option>
                                    <option value="Al contado">Al contado</option>
                                    <option value="50% Anticipo">50% de Anticipo</option>

                                </select>



                                <input type="hidden" id="servicios" name="inp" />
                                <button onclick="valor()" onmouseover="valor()" id="btn2" class="btn btn-sm btn-success " type="submit">Registrar <span class="glyphicon glyphicon-floppy-disk"></span></button>
                                <!--<input class="w3-check w3-margin-top" type="checkbox" checked="checked"> Remember me-->
                            </div>
                        </form>

                    }
                </div>
                <div class="col-sm-2"></div>
            </div>


            <!--Inicia panel de calendarización-->
            
            <div  id="prEv" class="w3-container city" style="display:none">
               
                <div class="col-sm-12 calendario">
                    

                    @{Html.RenderAction("Calend", "Home"); }
                </div>
                


            </div>
        </div>

    </section>

    <!--Inicia modal calendario-->
   
  

    <!--Termina modal calendario-->


    <!--Inicio del Modal Registro Servicios-->
    <div id="id01" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:500px; max-height:1800px" >
            @using (Html.BeginForm("altaServicio", "Home", FormMethod.Post))
            {
                <div class="w3-container w3-border-top w3-padding-16 w3-light-grey">
                    <div class="w3-center">
                        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Cerrar Ventana">×</span>
                        <h3 alt="Avatar" style="width:100%" class="w3-round w3-margin-top">Registrar Servicios</h3>
                        <div class="w3-left">
                            <button onclick="valor()" onmouseover="valor()" class="btn btn-sm btn-success btnmodal1  " title="Guardar"><i class="glyphicon glyphicon-floppy-disk"></i></button>
                            <button onclick="document.getElementById('id01').style.display='none'" type="submit" class="btn btn-sm btn-danger btnmodal1" title="Cerrar"><span class="glyphicon glyphicon glyphicon-remove"></span></button>
                            
                            <!-- <span class="w3-right w3-padding w3-hide-small">Forgot <a href="#">password?</a></span>-->
                        </div>
                    </div>
                </div>


                <div class="form-group" style="width:100%">
                    <label><b>Servicio:</b></label>
                    <input class="form-control" type="text" placeholder="Ingrese el nombre del servicio" name="nombre" required>
                    <label><b>Precio:</b></label>
                    <input class="form-control numero" type="number" placeholder="Ingrese el precio" name="precio" appearance=textfield required>
                    <label><b>Propiedades:</b></label>
                    <textarea class="form-control" type="text" placeholder="Ingrese las propiedades del servicio" name="prop" style="height:200px" required></textarea>
                    <input type="hidden" id="servicios" name="inp" />

                    <!--<input class="w3-check w3-margin-top" type="checkbox" checked="checked"> Remember me-->
                </div>

            }


        </div>
    </div>
    <!--Fin del Modal-->
    <!--Inicia modal reimprimir contrato-->
    <div id="id02" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="width:1000px">

            <div class="w3-container w3-border-top w3-padding-16 w3-light-grey">
                <div class="w3-center">
                    <span onclick="document.getElementById('id02').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Cerrar Ventana">×</span>
                    <h3 alt="Avatar" style="width:100%" class="w3-round w3-margin-top">CONTRATOS</h3>
                    <div class="w3-left">
                        <button onclick="document.getElementById('id02').style.display='none'" type="submit" class="btn btn-sm btn-danger btnmodal1" title="Cerrar"><span class="glyphicon glyphicon glyphicon-remove"></span></button>




                        <!-- <span class="w3-right w3-padding w3-hide-small">Forgot <a href="#">password?</a></span>-->
                    </div>
                </div>
            </div>



            <!--Inicio de Formulario-->
            <div class="col-md-offset-1 buscador">
                <div class="input-group ">
                    <input id="buscarc" type="text" class="form-control" placeholder="Buscar..." name="search" value="">
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </div>
            </div>
            <div class="box box-success  col-md-offset-0">

                <div class="box-header with-border text-center">
                    <h3 class="box-title">Contratos</h3>
                </div>
                <div class="table-responsive">
                    <table id="myTable" class="table table-bordered table-hover ">
                        <thead class="fondo-verde texto-blanco">

                            <tr>
                                <th style="width:5%">No.</th>
                                <th style="width:15%">Nombre</th>
                                <th style="width:15%">Jardín</th>
                                <th style="width:5%">Fecha Evento</th>
                                <th style="width:5%">Fecha Emisión</th>
                                <th style="width:35%">Servicios</th>
                                <th style="width:8%">Precio</th>
                                <th style="width:10%">Forma Pago</th>
                                <th style="width:10%">Reimprimir</th>
                            </tr>
                        </thead>
                        <tbody class="buscar2">

                            @{var numc = 0;}
                            @foreach (var con in ViewBag.cont)
            {
                                <tr>
                                    @{numc++;}
                                    <td>@numc</td>
                                    <td>@con.Nombre.ToUpper()</td>
                                    <td>@con.Jardin.ToUpper()</td>
                                    <td>@con.FechaEv.ToString("d/M/yyyy")</td>
                                    <td>@con.FechaEm.ToString("d/M/yyyy")</td>
                                    <td>@con.Servicios.ToUpper()</td>
                                    <td>@con.Precio.ToString("$###,###,##0.00")</td>
                                    <td>@con.FormaPago.ToUpper()</td>
                                    <td>
                                        <a class="text-center" href="@Url.Action("ReimprimirReport", "Contrato", new { id= con.Id_Contrato})" title="Imprimir">
                                            <i class="fa fa-print texto-verde"></i>
                                        </a>
                                    </td>

                                </tr>
                                        }


                        </tbody>
                    </table>
                    </div>
                </div>


            <!--<button  onclick="" onmouseover="" class="btn btn-sm btn-success">Nuevo<i class="fa fa-floppy-o"></i> </button>-->
            <!--Fin de Formulario-->



        </div>
    </div>
    <!--termina modal reimprimir contrato-->
   
    <!--Inicia Modal de calendario-->
    <div id='calendar'></div>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><span id="eventTitle"></span></h4>
                </div>
                <div class="modal-body">
                    <p id="pDetails"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!--Termina Modal de calendario-->
</body>

</html>